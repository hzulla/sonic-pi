9.4 Ticking

# Тики

Однажды, кодируя вживую, вы, вероятно, найдёте себя делающими множество вещей с
помощью циклов, основанных на кольцах. Вы будете помещать в кольца мелодии,
ритмы, последовательности аккордов, тембральные изменения и т.д и т.п.

## Тики И Кольца

Sonic Pi предоставляет *очень* удобный инструмент для работы с кольцами внутри
`live_loop`. Он называется системой тиков. В разделе о кольцах мы говорили о
счётчике, который постоянно увеличиватся, подобно номеру текущего такта. Тик
как раз и реализует эту идею. Давайте рассмотрим примеры:

```
counter = 0
live_loop :arp do
  play (scale :e3, :minor_pentatonic)[counter], release: 0.1
  counter += 1
  sleep 0.125
end
```

Это эквивалентно:

```
live_loop :arp do
  play (scale :e3, :minor_pentatonic).tick, release: 0.1
  sleep 0.125
end
```

Здесь мы просто берём минорную пентатонику, построенную от e3, и перебираем
каждый элемент кольца. Это делается путём добавления `.tick` в конец объявления
гаммы. Тик является локальным для живого цикла, поэтому каждый живой цикл может
иметь свой собственный, независимый тик:

```
live_loop :arp do
  play (scale :e3, :minor_pentatonic).tick, release: 0.1
  sleep 0.125
end

live_loop :arp2 do
  use_synth :dsaw
  play (scale :e2, :minor_pentatonic, num_octaves: 3).tick, release: 0.25
  sleep 0.25
end
```

## Функция tick

Вы также можете вызвать `tick` как стандартную функцию и использовать 
возвращаемое ею значение в качестве индекса:

```
live_loop :arp do
  idx = tick
  play (scale :e3, :minor_pentatonic)[idx], release: 0.1
  sleep 0.125
end
```

Однако, гораздо изящнее вызывать `.tick` в конце объявления кольцевого списка.
Функция `tick` полезна, когда вы хотите сделать что-то необычное с величиной
тика или, если нужно, использовать тики для чего-то отличного от индексирования
в кольцах.

## Функция Look

Магическая особенность тика заключается в том, что он  не только возвращает
новый индекс (или элемент кольцевого списка по этому индексу), он также
гарантирует, что в следующий раз, когда вы вызовете тик, вы получите следующее
значение. Посмотрите примеры для функции `tick`  в разделе "Язык" документации,
чтобы узнать о различных способах работы с ней. Впрочем, сейчас необходимо
отметить, что иногда вам захочется просто посмотреть на текущее значение тика
и *не увеличивать* его. Это доступно с помощью Функции `look`. Вы можете
вызвать `look` как стандартную функцию путем добавления `.look` в конец
кольцевого списка.

## Именование Тиков

Наконец, иногда вам может потребоваться использовать более одного тика внутри
живой петли. Это достигается путем предоставления вашему тику имени:

```
live_loop :arp do
  play (scale :e3, :minor_pentatonic).tick(:foo), release: 0.1
  sleep (ring 0.125, 0.25).tick(:bar)
end
```

Здесь мы используем два тика - один для игры нот, другой для времени сна.
Так как они оба находятся в одной и той же живой петле, чтобы держать их
раздельно, нам нужно дать им уникальные имена. Это тот же самое, что и
именование `live_loop` - мы просто передаем функции аргумент с префиксом `:`.
В примере выше мы назвали один тик `:foo` а другой `:bar`. Если мы хотим
применить функцию `look` к одному из тиков, нам нужно передать имя тика
функции `look`.

## Не Делайте Это Слишком Сложным

Большая часть мощности системы тиков не будет полезной, пока вы ещё только
начинаете осваивать Sonic Pi. Не пытайтесь сразу выучить всё в этом разделе.
Просто сосредоточьтесь на одном тике для одного кольца. Это даст вам больше
радости и простоты применения тиков для колец в твоих `live_loop`.

Взгляните на документацию для функции `tick`, там много полезных примеров.
Счастливых тиков!
