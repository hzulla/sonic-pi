6.1 Adding FX

# Добавление Эффектов

В этом разделе мы рассмотрим пару эффектов - реверберацию и эхо. Мы увидим,
как их использовать, как настраивать и как строить из них цепочки.

Система эффектов Sonic Pi использует блоки. Так что, если ты еще не прочел
главу 5.1, было бы неплохо её просмотреть и вернуться назад.

## Реверберация

Нужно написать специальный блок `with_fx :reverb`, если мы хотим использовать
реверберацию. Примерно так:

```
with_fx :reverb do
  play 50
  sleep 0.5
  sample :elec_plip
  sleep 0.5
  play 62
end
```

Теперь запустите этот код, и вы услышите как он звучит с реверберацией.
Неплохо, правда? Все что угодно будет звучать отлично с реверберацией.

Посмотрим, что произойдет, если поместить код вне блока do/end:

```
with_fx :reverb do
  play 50
  sleep 0.5
  sample :elec_plip
  sleep 0.5
  play 62
end

sleep 1
play 55
```

Обратите внимание, как последний `play 55` играется без реверберации. Это
происходит потому, что эта строка находится *за пределами* блока do/end,
то есть она не пропускается через эффект.

Точно так же, если играть звуки перед блоком do/end, то и они не будут
обрабатываться эффектом:

```
play 55
sleep 1

with_fx :reverb do
  play 50
  sleep 0.5
  sample :elec_plip
  sleep 0.5
  play 62
end

sleep 1
play 55
```

## Эхо

Есть множество эффектов на выбор. Как насчет эхо?

```
with_fx :echo do
  play 50
  sleep 0.5
  sample :elec_plip
  sleep 0.5
  play 62
end
```

Одна из сильных сторон блоков эффектов Sonic Pi в том, что у них есть
регулировки, похожие на те, что мы уже видели у `play` и `sample`. Например,
рассмотрим забавный параметр `phase:`, который представляет собой длительность
эхо в долях такта. Сделаем эхо помедленнее:

```
with_fx :echo, phase: 0.5 do
  play 50
  sleep 0.5
  sample :elec_plip
  sleep 0.5
  play 62
end
```

Или побыстрее:

```
with_fx :echo, phase: 0.125 do
  play 50
  sleep 0.5
  sample :elec_plip
  sleep 0.5
  play 62
end
```

Заставим эхо затихать дольше, установив время `decay:` на 8 долей такта:

```
with_fx :echo, phase: 0.5, decay: 8 do
  play 50
  sleep 0.5
  sample :elec_plip
  sleep 0.5
  play 62
end
```

## Вкладывание Эффектов

Блоки эффектов можно вкладывать друг в друга, что позволяет очень легко
собирать из них каскады эффектов. Например, что если вы захотите пропустить
некоторый код через эхо, а потом через реверберацию? Легко! Просто поместите
один эффект внутри другого:

```
with_fx :reverb do
  with_fx :echo, phase: 0.5, decay: 8 do
    play 50
    sleep 0.5
    sample :elec_blup
    sleep 0.5
    play 62
  end
end
```

Представьте как звук вытекает изнутри наружу. Весь звук из внутреннего блока
do/end (такой как `play 50`) вначале попадает в эффект эхо, а затем звук с
эффектом эхо в свою очередь отправляется в эффект реверберации.

Можно создавать очень глубокие вложения, чтобы получать непредсказуемые
результаты. Однако, имейте в виду, что эффекты требуют больших ресурсов. При
вложении они работают в одно и то же время. Так что используйте эффекты
разумно, особенно на платформах с низким количеством ресурсов (например
Raspberry Pi).

## Исследование Эффектов

В Sonic Pi встроено большое количество эффектов на выбор. Чтобы увидеть
доступные, щелкните мышью по FX в левом нижнем углу справочной системы. Вот
некоторые из моих любимых:

- wobble,
- reverb,
- echo,
- distortion,
- slicer

Теперь вы можете добавлять эффекты везде, где только захочется!
